@page "/auth/login"
@using global::Shared.DTO
@using global::Shared.Requests.Auth
@inject NavigationManager Navigation
@inject ToastService ToastService
<h3>LogIn</h3>

<div>
<EditForm Model="@_loginModel" OnSubmit="Submit">
    <p>
        Почта :<br/>
        <InputText type="email" @bind-Value="_loginModel.Email"/>
    </p>
    <p>
        Пароль:<br/>
        <InputText type="password" @bind-Value="_loginModel.Password"/>
    </p>

    <button type="submit">Войти</button>
</EditForm>
</div>
@code {
    private readonly LoginModel _loginModel = new();
    
    private async Task Submit()
    {
        var request = new LogInRequest { LoginModel = _loginModel };
        var response= await Facade.LogInUser(request);
        if (response is not null)
        {
            ToastService.ShowToast("You've been logged in", ToastLevel.Info);
            Navigation.NavigateTo("/");
        }
    }
}